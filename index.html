<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/diff-match-patch@1.0.5/index.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document Comparison Tool</title>
    <style>

.header {
    background-color: white;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    padding: 16px 30px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: sticky;
    top: 0;
    z-index: 100;
}

.header-title {
    flex-grow: 1;
    text-align: center;
}

.header-title h1 {
    font-size: 2rem; /* Smaller than the original 2.8rem */
    background: var(--primary-gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-fill-color: transparent;
    margin: 0; /* Remove margins */
    font-weight: 700;
    letter-spacing: -0.03em;
    line-height: 1.2;
}

.header-buttons {
    display: flex;
    gap: 15px;
    align-items: center;
    flex-shrink: 0;
}


.about-btn, .new-comparison-btn {
    background-color: white;
    color: var(--primary-color);
    border: 2px solid var(--primary-color);
    border-radius: 30px;
    padding: 10px 20px;
    font-size: 0.95rem;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-standard);
}

.about-btn:hover, .new-comparison-btn:hover {
    background-color: var(--primary-color);
    color: white;
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(87, 6, 140, 0.3);
}

        .new-comparison-btn {
            background: var(--primary-gradient);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 12px 24px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-standard);
            margin-right: 15px;
            box-shadow: 0 3px 10px rgba(87, 6, 140, 0.2);
        }

        .new-comparison-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(87, 6, 140, 0.3);
        }

        .hidden {
            display: none !important;
        }
        :root {
            --primary-color: #57068c;
            --primary-dark: #330662;
            --primary-gradient: linear-gradient(135deg, #57068c 0%, #330662 100%);
            --secondary-color: #f8f9fa;
            --text-color: #333;
            --border-color: #e0e0e0;
            --shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            --border-radius: 12px;
            --border-radius-sm: 8px;
            --accent-light: #9c6fb6;
            --accent-lighter: #e5e1ea;
            --transition-standard: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            --card-border: 1px solid rgba(230, 230, 240, 0.7);
            --font-primary: 'Segoe UI', Roboto, -apple-system, BlinkMacSystemFont, sans-serif;
        }

        .panel-content {
            white-space: pre-wrap;
            word-wrap: break-word;
            overflow-wrap: break-word;
            line-height: 1.8;
            font-size: 1.1rem;
            text-align: justify;
            max-width: 100%;
            width: 100%;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: var(--font-primary);
            background: #f0ecf8;
            color: var(--text-color);
            line-height: 1.6;
            margin: 0;
            padding: 0;
        }
        
        .container {
            max-width: 1300px;
            margin: 0 auto;
            padding: 30px 20px 80px;
        }
        
        h1 {
            font-size: 2.8rem;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-fill-color: transparent;
            margin-bottom: 2.5rem;
            text-align: center;
            font-weight: 700;
            letter-spacing: -0.03em;
            line-height: 1.2;
        }
        
        .upload-section {
            background-color: white;
            margin-bottom: 50px;
            padding: 40px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            border: var(--card-border);
            position: relative;
            overflow: hidden;
        }
        
        .upload-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--primary-gradient);
        }
        
        .tab-container {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--border-color);
        }
        
        .tab-btn {
            background: none;
            border: none;
            padding: 16px 32px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            color: var(--text-color);
            border-bottom: 3px solid transparent;
            transition: var(--transition-standard);
            margin: 0;
            display: inline-block;
            box-shadow: none;
        }
        
        .tab-btn:hover {
            color: var(--primary-color);
            background-color: rgba(87, 6, 140, 0.05);
        }
        
        .tab-btn.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
            background-color: rgba(87, 6, 140, 0.05);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .examples-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }
        
        .example-card {
            background: white;
            border: var(--card-border);
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            transition: var(--transition-standard);
            position: relative;
            overflow: hidden;
        }
        
        .example-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--primary-gradient);
        }
        
        .example-card h4 {
            font-size: 1.3rem;
            color: var(--primary-dark);
            margin-bottom: 8px;
            font-weight: 700;
        }
        
        .example-author {
            font-size: 0.95rem;
            color: var(--accent-light);
            font-weight: 600;
            margin-bottom: 12px;
            font-style: italic;
        }
        
        .example-description {
            color: var(--text-color);
            line-height: 1.5;
            margin-bottom: 20px;
            font-size: 0.95rem;
        }
        
        .example-btn {
            background: var(--primary-gradient);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 12px 24px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-standard);
            width: 100%;
            box-shadow: 0 3px 10px rgba(87, 6, 140, 0.2);
            margin: 0;
            display: block;
        }
        
        .example-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(87, 6, 140, 0.3);
        }
        
        .error {
            background-color: #fce8ea;
            color: #721c24;
            font-weight: 500;
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            border-left: 5px solid #d9534f;
        }
        
        .comparison-viewport {
            position: relative;
            width: 100%;
            overflow: hidden;
            height: 700px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            border: var(--card-border);
            background-color: white;
        }
        
        .comparison-slider {
            display: flex;
            height: 100%;
            transition: transform 0.6s cubic-bezier(0.22, 1, 0.36, 1);
        }
        
        .panel {
            width: 100%;
            min-width: 100%;
            max-width: 100%;
            height: 100%;
            padding: 30px 40px;
            background-color: white;
            overflow-y: auto;
            flex-shrink: 0;
            box-sizing: border-box;
        }
        
        .panel.diff-panel {
            background-color: #fafafa;
        }

       

        .diff-header h3 {
            margin-bottom: 0;
            flex-grow: 1;
        }

        @media (max-width: 768px) {
            .diff-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .new-comparison-btn {
                align-self: stretch;
                text-align: center;
            }
        }
        
        .nav-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--primary-gradient);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.6rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
            z-index: 10;
            transition: var(--transition-standard);
        }
        
        .logo-container {
    height: 40px; /* Much smaller than before */
    display: flex;
    align-items: center;
    flex-shrink: 0;
}

.logo-container img {
    height: 100%;
    max-width: 120px; /* Limit width too */
    object-fit: contain;
}


        .nav-arrow.left {
            left: 25px;
        }
        
        .nav-arrow.right {
            right: 25px;
        }
        
        .nav-arrow:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }
        
        .navigation-info {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--primary-dark);
            z-index: 5;
            backdrop-filter: blur(10px);
        }
        
       /* Deletion styles */
.deletion {
    background-color: #ffebee;
    color: #c62828;
    text-decoration: line-through;
    padding: 2px 4px;
    border-radius: 3px;
    border-left: 3px solid #ef5350;
}

.relocated {
    border-left: 4px solid #9c6fb6 !important;
    background-color: #f3f0f7 !important;
    color: #57068c !important;
}

.deletion.relocated {
    text-decoration: line-through;
}

.addition.relocated {
    text-decoration: underline;
}

.diff-legend {
    margin-bottom: 20px;
    padding: 10px;
    background: #f8f9fa;
    border-radius: 5px;
    font-size: 0.9rem;
}

.legend-item {
    margin-right: 20px;
    display: inline-block;
}

/* Addition styles */
.addition {
    background-color: #e8f5e8;
    color: #2e7d32;
    text-decoration: none;
    padding: 2px 4px;
    border-radius: 3px;
    border-left: 3px solid #66bb6a;
}

/* Level-specific styling */
.char-level {
    font-weight: 600;
    border-width: 1px;
}

.word-level {
    font-weight: 500;
    border-width: 2px;
}

.phrase-level {
    font-weight: 500;
    border-width: 2px;
    margin: 0 1px;
}

.sentence-level {
    font-weight: 400;
    border-width: 3px;
    margin: 2px 0;
    display: inline-block;
}


        .upload-area {
    text-align: center;
}

.file-input-container {
    border: 3px dashed var(--accent-light);
    border-radius: var(--border-radius);
    padding: 40px 20px;
    margin-bottom: 20px;
    transition: var(--transition-standard);
    cursor: pointer;
}

.file-input-container:hover {
    border-color: var(--primary-color);
    background-color: rgba(87, 6, 140, 0.02);
}

.upload-icon {
    font-size: 3rem;
    margin-bottom: 15px;
}

.upload-text strong {
    font-size: 1.2rem;
    color: var(--primary-dark);
    display: block;
    margin-bottom: 8px;
}

.upload-text p {
    color: var(--accent-light);
    margin: 0;
}

.file-list {
    background: var(--secondary-color);
    border-radius: var(--border-radius-sm);
    padding: 20px;
    margin-bottom: 20px;
    text-align: left;
}

.file-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 0;
    border-bottom: 1px solid var(--border-color);
}

.file-item:last-child {
    border-bottom: none;
}

.file-name {
    font-weight: 600;
    color: var(--primary-dark);
}

.file-size {
    color: var(--accent-light);
    font-size: 0.9rem;
}

.remove-file {
    background: #dc3545;
    color: white;
    border: none;
    border-radius: 50%;
    width: 25px;
    height: 25px;
    cursor: pointer;
    font-size: 0.8rem;
}

.compare-btn {
    background: var(--primary-gradient);
    color: white;
    border: none;
    border-radius: 25px;
    padding: 15px 30px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-standard);
    box-shadow: 0 3px 10px rgba(87, 6, 140, 0.2);
}

.compare-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(87, 6, 140, 0.3);
}

@media (max-width: 768px) {
    .header {
        flex-direction: column;
        gap: 15px;
        padding: 20px 15px;
    }
    
    .header-title h1 {
        font-size: 1.8rem;
    }
    
    .logo-container {
        height: 35px;
    }
    
    .header-buttons {
        width: 100%;
        justify-content: center;
    }
}

/* Modal Styles */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
}

.modal-content {
    background-color: white;
    margin: 7% auto;
    padding: 40px;
    border-radius: var(--border-radius);
    box-shadow: 0 15px 50px rgba(0, 0, 0, 0.25);
    width: 80%;
    max-width: 700px;
    animation: fadeIn 0.4s;
    position: relative;
}

.modal-content::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 5px;
    background: var(--primary-gradient);
    border-top-left-radius: var(--border-radius);
    border-top-right-radius: var(--border-radius);
}

.modal-close {
    position: absolute;
    top: 15px;
    right: 15px;
    color: #777;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
    transition: var(--transition-standard);
    height: 40px;
    width: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    background-color: #f5f5fa;
}

.modal-close:hover {
    color: var(--primary-dark);
    background-color: var(--accent-lighter);
    transform: rotate(90deg);
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.modal-content h3 {
    color: var(--primary-color);
    margin-top: 25px;
    margin-bottom: 15px;
    font-size: 1.3rem;
    border-bottom: 1px solid var(--accent-lighter);
    padding-bottom: 8px;
}

.modal-content h4 {
    color: var(--primary-dark);
    margin-top: 20px;
    margin-bottom: 10px;
    font-size: 1.1rem;
    font-weight: 600;
}

.modal-content ul {
    margin-left: 20px;
    margin-bottom: 15px;
}

.modal-content li {
    margin-bottom: 8px;
    line-height: 1.5;
}

.modal-content li strong {
    color: var(--primary-dark);
}

.citation {
    margin-top: 30px;
    padding: 15px;
    background-color: var(--secondary-color);
    border-left: 4px solid var(--primary-color);
    font-size: 0.9rem;
    font-style: italic;
}


    </style>
</head>


<body>

    <header class="header">
        <div class="logo-container">
            <img src="https://i.imgur.com/iIODsNl.png" alt="NYU Logo" class="nyu-logo">
        </div>
        <div class="header-title">
            <h1>u even revise, bro?</h1>
        </div>
        <div class="header-buttons">
            <button class="about-btn" id="aboutButton">About</button>
            <button class="new-comparison-btn hidden" id="headerNewComparisonBtn">New Comparison</button>
        </div>
    </header>

    

    <div class="container">
        
        
        <div class="upload-section">
            <h2>Compare Documents</h2>
            
            <div class="tab-container">
                <button class="tab-btn active" id="uploadTab">Upload Files</button>
                <button class="tab-btn" id="examplesTab">Example Essays from <i>Mercer Street</i></button>
            </div>
            
            <div id="uploadContent" class="tab-content active">
                <div class="upload-area">
                    <div class="file-input-container">
                        <label for="fileInput" class="file-input-label">
                            <div class="upload-icon">üìÅ</div>
                            <div class="upload-text">
                                <strong>Choose files to compare</strong>
                                <p>Select multiple text files (.txt, .docx) or drag and drop them here</p>
                            </div>
                        </label>
                        <input type="file" id="fileInput" multiple accept=".txt,.docx,text/plain,application/vnd.openxmlformats-officedocument.wordprocessingml.document" style="display: none;">                    </div>
                    <div id="fileList" class="file-list" style="display: none;"></div>
                    <button id="compareFiles" class="compare-btn" style="display: none;">Compare Files</button>
                </div>
            </div>
            
            <div id="examplesContent" class="tab-content">
                <div class="examples-grid">
                    <div class="example-card" data-essay="essay1">
                        <h4>Ping! Panic! Repeat!</h4>
                        <p class="example-author">By Braden Ou</p>
                        <p class="example-description">An ethnographic study exploring smartphone use - view progression through 4 drafts</p>
                        <button class="example-btn">View All Drafts</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="errorMessage" class="error" style="display: none;"></div>
        
        <div id="comparisonResults" style="display: none;">
            <div class="comparison-viewport">
                <div class="navigation-info" id="navigationInfo">Draft 1</div>
                <div class="nav-arrow left" id="leftArrow">‚Üê</div>
                <div class="nav-arrow right" id="rightArrow">‚Üí</div>
                <div class="comparison-slider" id="comparisonSlider">
                    <!-- Panels will be dynamically generated -->
                </div>
            </div>
        </div>
    </div>
</div>


    <!-- About Modal -->
<div id="aboutModal" class="modal">
    <div class="modal-content">
        <span class="modal-close" id="aboutModalClose">&times;</span>
        <h2>About This Revision Analysis Tool</h2>
        <div>
            <h3>Understanding How We Revise</h3>
            <p>This tool helps students analyze their revision patterns by comparing multiple drafts of their writing. By visualizing the types of changes made between drafts, students can better understand their current revision habits and learn to develop more sophisticated revision strategies.</p>
            
            <h3>The Research Behind This Tool</h3>
            <p>Writing researcher Nancy Sommers conducted a landmark study comparing how student writers and experienced writers approach revision. Her findings, published in <em>College Composition and Communication</em> (1980), revealed significant differences in revision strategies:</p>
            
            <h4>Student Writers Typically:</h4>
            <ul>
                <li><strong>Focus on word-level changes</strong> - primarily substituting individual words and fixing surface errors</li>
                <li><strong>View revision as "cleaning up"</strong> - treating revision as editing rather than discovery</li>
                <li><strong>Lack strategies for large-scale revision</strong> - struggle to see opportunities for structural changes</li>
                <li><strong>Stop revising when surface rules are satisfied</strong> - rather than when meaning is fully developed</li>
            </ul>
            
            <h4>Experienced Writers:</h4>
            <ul>
                <li><strong>Focus on finding the form of their argument</strong> - making structural and conceptual changes</li>
                <li><strong>Consider their audience</strong> - revising based on reader expectations and needs</li>
                <li><strong>See revision as meaning-making</strong> - using revision to discover and develop ideas</li>
                <li><strong>Employ recursive strategies</strong> - cycling through different levels of revision</li>
            </ul>
            
            <h3>Important Insight</h3>
            <p>Sommers found that students aren't lazy or unwilling to revise. Rather, they <strong>"do what they have been taught to do in a consistently narrow and predictable way"</strong> and lack strategies for handling larger structural issues. As one student in Sommer's study noted: <em>"I knew something larger was wrong, but I didn't think it would help to move words around."</em></p>
            
            <h3>How This Tool Helps</h3>
            <p>By examining the types and levels of changes made across drafts, this tool helps students:</p>
            <ul>
                <li>Recognize their current revision patterns</li>
                <li>Identify opportunities for more substantial revisions</li>
                <li>Understand the difference between editing and true revision</li>
                <li>Develop strategies for structural and conceptual changes</li>
                <li>Move toward the holistic revision practices of experienced writers</li>
            </ul>
            
            <p class="citation"><strong>Source:</strong> Sommers, Nancy. "Revision Strategies of Student Writers and Experienced Adult Writers." <em>College Composition and Communication</em>, vol. 31, no. 4, 1980, pp. 378-388.</p>
        </div>
    </div>
</div>

    <script>
        // Global variables
        let currentPosition = 0;
        let totalPanels = 0;
        let currentEssay = null;
        
        // Function to show error message
        function showError(message) {
            const errorMessage = document.getElementById('errorMessage');
            if (errorMessage) {
                errorMessage.textContent = message;
                errorMessage.style.display = 'block';
            }
        }
        
   // 1. The main improved diff function
   function generateAdvancedDiff(text1, text2) {
    const dmp = new diff_match_patch();
    const diffs = dmp.diff_main(text1, text2);
    dmp.diff_cleanupSemantic(diffs);
    
    const relocations = findRelocations(text1, text2, diffs);
    
    let html = '';
    let pos1 = 0;
    let pos2 = 0;
    
    for (let i = 0; i < diffs.length; i++) {
        const [operation, text] = diffs[i];
        
        let currentPos1 = pos1;
        let currentPos2 = pos2;
        
        if (operation === 0) { // Equal
            html += text;
            pos1 += text.length;
            pos2 += text.length;
        } else if (operation === -1) { // Deletion
            const isRelocated = isPartOfRelocation(currentPos1, text.length, relocations.deletions);
            const level = determineChangeLevel(text);
            
            if (isRelocated) {
                html += `<span class="deletion ${level} relocated">${text}</span>`;
            } else {
                html += `<span class="deletion ${level}">${text}</span>`;
            }
            pos1 += text.length;
        } else if (operation === 1) { // Addition
            const isRelocated = isPartOfRelocation(currentPos2, text.length, relocations.additions);
            const level = determineChangeLevel(text);
            
            if (isRelocated) {
                html += `<span class="addition ${level} relocated">${text}</span>`;
            } else {
                html += `<span class="addition ${level}">${text}</span>`;
            }
            pos2 += text.length;
        }
    }
    
    return html;
}

// New function to detect modifications
function detectModifications(diffs) {
    const enhanced = [];
    
    for (let i = 0; i < diffs.length; i++) {
        const current = diffs[i];
        const next = diffs[i + 1];
        
        // Look for deletion followed by addition (potential modification)
        if (current[0] === -1 && next && next[0] === 1) {
            const deletedText = current[1];
            const addedText = next[1];
            
            // Calculate similarity to determine if it's a modification
            const similarity = calculateTextSimilarity(deletedText, addedText);
            
            if (similarity > 0.3) { // 30% similar = modification
                enhanced.push([current[0], current[1], true]); // Mark as modification
                enhanced.push([next[0], next[1], true]); // Mark as modification
                i++; // Skip the next item since we processed it
            } else {
                enhanced.push([current[0], current[1], false]);
            }
        } else {
            enhanced.push([current[0], current[1], false]);
        }
    }
    
    return enhanced;
}

// Helper function to calculate text similarity
function calculateTextSimilarity(text1, text2) {
    const words1 = text1.toLowerCase().split(/\s+/);
    const words2 = text2.toLowerCase().split(/\s+/);
    
    const set1 = new Set(words1);
    const set2 = new Set(words2);
    
    const intersection = new Set([...set1].filter(x => set2.has(x)));
    const union = new Set([...set1, ...set2]);
    
    return intersection.size / union.size;
}

// 2. Helper function to determine change levels
function determineChangeLevel(text) {
    const wordCount = (text.match(/\b\w+\b/g) || []).length;
    const sentenceCount = (text.match(/[.!?]+/g) || []).length;
    const hasLineBreaks = text.includes('\n');
    
    if (hasLineBreaks && sentenceCount > 1) {
        return 'sentence-level';
    } else if (wordCount > 5) {
        return 'phrase-level';
    } else if (wordCount > 1) {
        return 'word-level';
    } else {
        return 'char-level';
    }
}


function splitIntoSentences(text) {
    return text.match(/[^.!?]+[.!?]+/g) || [text];
}

function generateWordLevelDiff(oldSentence, newSentence) {
    const words1 = oldSentence.split(/\s+/);
    const words2 = newSentence.split(/\s+/);
    
    const wordChanges = computeLCS(words1, words2);
    let result = '';
    
    for (let change of wordChanges) {
        if (change.type === 'equal') {
            result += change.value + ' ';
        } else if (change.type === 'delete') {
            result += `<span class="deletion word-level">${change.value}</span> `;
        } else if (change.type === 'insert') {
            result += `<span class="addition word-level">${change.value}</span> `;
        } else if (change.type === 'replace') {
            // For replaced words, do character-level comparison
            const charDiff = generateCharacterLevelDiff(change.oldValue, change.newValue);
            result += charDiff + ' ';
        }
    }
    
    return `<span class="modification sentence-level">${result.trim()}</span>`;
}

function generateCharacterLevelDiff(oldWord, newWord) {
    // Simple character-level diff for individual words
    if (oldWord === newWord) return oldWord;
    
    // Check if it's a simple addition/deletion
    if (oldWord.includes(newWord)) {
        return `<span class="modification word-level">${newWord}</span>`;
    } else if (newWord.includes(oldWord)) {
        return `<span class="modification word-level">${newWord}</span>`;
    }
    
    // For complex changes, show as modification
    return `<span class="deletion char-level">${oldWord}</span><span class="addition char-level">${newWord}</span>`;
}



// Enhanced phrase-level detection
function detectPhraseChanges(text1, text2) {
    // Split into phrases (groups of 2-5 words)
    const phrases1 = extractPhrases(text1);
    const phrases2 = extractPhrases(text2);
    
    const phraseChanges = computeLCS(phrases1, phrases2);
    let result = '';
    
    for (let change of phraseChanges) {
        if (change.type === 'equal') {
            result += change.value + ' ';
        } else if (change.type === 'delete') {
            result += `<span class="deletion phrase-level">${change.value}</span> `;
        } else if (change.type === 'insert') {
            result += `<span class="addition phrase-level">${change.value}</span> `;
        } else if (change.type === 'replace') {
            result += `<span class="deletion phrase-level">${change.oldValue}</span><span class="addition phrase-level">${change.newValue}</span> `;
        }
    }
    
    return result.trim();
}

function extractPhrases(text) {
    const words = text.split(/\s+/);
    const phrases = [];
    
    // Create overlapping phrases of 2-4 words
    for (let i = 0; i < words.length; i += 2) {
        const phrase = words.slice(i, Math.min(i + 3, words.length)).join(' ');
        if (phrase.trim()) phrases.push(phrase);
    }
    
    return phrases;
}


// 3. The missing findRelocations function
function findRelocations(text1, text2, diffs) {
    // Extract meaningful chunks (sentences or significant phrases)
    const chunks1 = extractMeaningfulChunks(text1);
    const chunks2 = extractMeaningfulChunks(text2);
    
    const relocations = { deletions: [], additions: [] };
    
    // Find chunks that appear in both documents but in different positions
    for (const chunk1 of chunks1) {
        for (const chunk2 of chunks2) {
            if (chunk1.text.trim() === chunk2.text.trim() && chunk1.text.length > 30) {
                // Calculate relative positions
                const relPos1 = chunk1.position / text1.length;
                const relPos2 = chunk2.position / text2.length;
                
                // If position changed significantly, mark as relocation
                if (Math.abs(relPos1 - relPos2) > 0.1) {
                    relocations.deletions.push({
                        position: chunk1.position,
                        length: chunk1.text.length
                    });
                    relocations.additions.push({
                        position: chunk2.position,
                        length: chunk2.text.length
                    });
                }
            }
        }
    }
    
    return relocations;
}


// 4. Helper function to extract meaningful chunks
function extractMeaningfulChunks(text) {
    const chunks = [];
    
    // Extract sentences
    const sentences = text.match(/[^.!?]+[.!?]+/g) || [];
    let position = 0;
    
    for (const sentence of sentences) {
        const start = text.indexOf(sentence, position);
        if (start !== -1) {
            chunks.push({
                text: sentence,
                position: start,
                length: sentence.length
            });
            position = start + sentence.length;
        }
    }
    
    return chunks;
}

// 5. Helper function to check if content is part of a relocation
function isPartOfRelocation(position, length, relocations) {
    const end = position + length;
    for (const reloc of relocations) {
        const relocEnd = reloc.position + reloc.length;
        // Check for overlap
        if (!(position >= relocEnd || end <= reloc.position)) {
            return true;
        }
    }
    return false;
}


        // Function to format text with proper paragraph breaks
        function formatText(text) {
            // Split into sentences and group them into paragraphs
            const sentences = text.match(/[^\.!?]+[\.!?]+/g) || [text];
            let formattedText = '';
            
            for (let i = 0; i < sentences.length; i++) {
                formattedText += sentences[i].trim();
                // Add paragraph break every 2-3 sentences for better readability
                if ((i + 1) % 3 === 0 && i < sentences.length - 1) {
                    formattedText += '\n\n';
                } else if (i < sentences.length - 1) {
                    formattedText += ' ';
                }
            }
            
            return formattedText;
        }

        // File upload functionality
let uploadedFiles = [];

function handleFileUpload(files) {
    const fileList = document.getElementById('fileList');
    const compareBtn = document.getElementById('compareFiles');
    
    for (let file of files) {
        if (file.type === 'text/plain' || 
            file.name.endsWith('.txt') || 
            file.name.endsWith('.docx') ||
            file.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') {
            uploadedFiles.push(file);
            addFileToList(file);
        } else {
            showError(`File "${file.name}" is not supported. Please upload .txt or .docx files only.`);
        }
    }
    
    if (uploadedFiles.length > 0) {
        fileList.style.display = 'block';
        if (uploadedFiles.length >= 2) {
            compareBtn.style.display = 'block';
        }
    }
}

function addFileToList(file) {
    const fileList = document.getElementById('fileList');
    const fileItem = document.createElement('div');
    fileItem.className = 'file-item';
    fileItem.innerHTML = `
        <div>
            <div class="file-name">${file.name}</div>
            <div class="file-size">${(file.size / 1024).toFixed(1)} KB</div>
        </div>
        <button class="remove-file" onclick="removeFile('${file.name}')">√ó</button>
    `;
    fileList.appendChild(fileItem);
}

function removeFile(fileName) {
    uploadedFiles = uploadedFiles.filter(file => file.name !== fileName);
    refreshFileList();
}

function refreshFileList() {
    const fileList = document.getElementById('fileList');
    const compareBtn = document.getElementById('compareFiles');
    
    fileList.innerHTML = '';
    
    if (uploadedFiles.length === 0) {
        fileList.style.display = 'none';
        compareBtn.style.display = 'none';
    } else {
        uploadedFiles.forEach(addFileToList);
        compareBtn.style.display = uploadedFiles.length >= 2 ? 'block' : 'none';
    }
}

async function compareUploadedFiles() {
    if (uploadedFiles.length < 2) {
        showError('Please upload at least 2 files to compare.');
        return;
    }
    
    try {
        const fileContents = [];
        for (let file of uploadedFiles) {
            const text = await readFileContent(file);
            const fileName = file.name.replace(/\.(txt|docx)$/, '');
            fileContents.push({
                version: fileName,
                text: text
            });
        }
        
        const uploadedEssay = {
            title: "Uploaded Files Comparison",
            author: "User Upload", 
            description: "Comparison of uploaded text files",
            drafts: fileContents
        };
        
        currentEssay = uploadedEssay;
        const panelInfo = createPanels(uploadedEssay);
        totalPanels = panelInfo.length;
        currentPosition = 0;
        
        // ADD THESE LINES HERE:
        // Hide upload section
        const uploadSection = document.querySelector('.upload-section');
        if (uploadSection) uploadSection.classList.add('hidden');
        
        const comparisonResults = document.getElementById('comparisonResults');
        comparisonResults.style.display = 'block';
        updateSliderPosition();
        updateNavigationInfo(panelInfo);
        
        // ADD THIS LINE HERE:
        // Add event listener for new comparison button
        setupNewComparisonButton();
        
    } catch (error) {
        showError('Error reading files: ' + error.message);
    }
}
    async function readFileContent(file) {
    return new Promise((resolve, reject) => {
        if (file.name.endsWith('.docx') || file.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') {
            // Handle .docx files with mammoth
            const reader = new FileReader();
            reader.onload = async function(e) {
                try {
                    const arrayBuffer = e.target.result;
                    const result = await mammoth.extractRawText({arrayBuffer: arrayBuffer});
                    resolve(result.value);
                } catch (error) {
                    reject(new Error('Failed to read .docx file: ' + error.message));
                }
            };
            reader.onerror = () => reject(new Error('Failed to read file'));
            reader.readAsArrayBuffer(file);
        } else {
            // Handle .txt files
            const reader = new FileReader();
            reader.onload = e => resolve(e.target.result);
            reader.onerror = () => reject(new Error('Failed to read file'));
            reader.readAsText(file);
        }
    });
}


        
        // Sample essay data with more realistic content
        const exampleEssays = {
            essay1: {
                title: "Ping! Panic! Repeat!",
                author: "Braden Ou",
                description: "An ethnographic study exploring smartphone use",
                drafts: [
                { 
                version: "Draft 1", 
                text: `Ping! Panic! Repeat!
Picture a late-night subway ride on the F subway line: fluorescent lights flicker overhead, a half-empty car rattles through the tunnel, and every few seconds somebody's phone buzzes. "Armed robbery‚ÄîUpper East Side," flashes one push notification. "Man shoved onto tracks in Midtown," warns another. A teenager beside you scrolls an endless reel of grainy security-camera clips, often with some unsuspecting victim about to be assaulted; a middle-aged commuter checks the Citizen app, its red map pins pulsing like fresh wounds across the city grid. Even the PA system crackles with an "If you see something, say something" reminder. Surrounded by screens and alerts, the train car feels poised for disaster, and instinctively, you tighten your grip on the handrail, eyes darting toward every stranger who wanders too close.

Yet that sense of imminent danger is becoming mostly a digital mirage. According to the NYPD's first-quarter 2025 report, subway crime is down double digits, with zero murders‚Äîthe safest start to a year in at least seven years and among the lowest violent-crime tallies ever recorded on the system (New York Daily News). What makes the ride feel dangerous isn't an epidemic of violence but the smartphone in every pocket, collapsing the city's rare worst moments into a relentless real-time news crawl. The very device that lets us summon help also directs each tragedy straight into our brains, inflating our perceived risk on an otherwise routine commute. This paradox creates an interesting question: How does the tension between smartphones' designed purpose of connection and their more often actual use of distraction and social shielding reflect more profound anxieties in modern society? To investigate this, I spent three weeks in February of 2025 riding numerous subway lines and bus routes, documenting episodes of public phone use.

Smartphones were never meant to play this role. When Steve Jobs unveiled the iPhone in 2007, he called it "a widescreen iPod with touch controls; a revolutionary mobile phone; and a breakthrough Internet communications device" (Pangambam). In the years since, ownership of this powerful device has soared to 91 percent of American adults. (Pew Research Center). Today, it constructs personal media bubbles that double as social shields, offering connection while encouraging retreat.

Technology sociologist Sherry Turkle, a professor of social studies of science and technology at Massachusetts Institute of Technology, has coined the term "tethered self," which illustrates this phenomenon. According to Turkle, smartphones have created a state of society where we are "always-on/always-on-you," a reference to how smartphones are always readily available to us as a society (Turkle 121). This "tethered self" creates a world where we maintain a constant psychological readiness for the connections that matter to us digitally. But many people embrace this "tethered self," actively choosing to escape into this digital world even if not called upon by their connections in the digital world. This, as Turkle continues, creates a "liminal space between the physical real and its digital lives on multiple screens" (Turkle 122). We are never fully here, yet never fully elsewhere either.

Turkle's concept describes exactly what my field notes expose: riders feel safest the moment they retreat into a device that simultaneously stokes their fear. Riding the M103 down Third Avenue, I watched two friends chat easily. They had a nice, long conversation, talking about their daily lives, with neither of them holding a smartphone at all. After a while, it seemed like one of the friends had reached his stop. He said goodbye to his friend and left the bus, leaving the other friend to ride alone. The moment the remaining rider was alone, he cast a cautious glance around, made brief eye contact with me, and fled into his phone. When I made eye contact, I also felt a similar urge, pulling out my phone to start playing video games on it. Interestingly enough, this seems to indicate that this urge is contagious in a sense. In my mind, eye contact with a stranger was uncomfortable, and I felt a need to intentionally distract myself with a phone to try to relieve myself of the awkward situation. I imagine that the stranger also felt the same way, suddenly feeling a void that was once filled with conversation with his friend. Part of this does have a cultural backing to it; there are plenty of folktales on the New York City subway about how making momentary eye contact with a stranger resulted in an altercation. As such, it has become a social norm for people to actively avoid eye contact, and the smartphone has been repurposed as a tool for this use. I could be doing absolutely nothing on my phone, just staring at the weather for the hundredth time, yet it creates the sense of safety that I will not accidentally stare right into someone's eyes, possibly creating an unsettling and tense situation. This incident revealed a profound irony: devices engineered to enhance connection have become tools that help us avoid human contact. The smartphone's design makes it an ideal shield‚Äîits screen demands attention and signals busyness to others, creating a socially acceptable way to opt out of physical presence while maintaining the appearance of productivity.  This is the crux of Turkle's point about technology: We have become so attached to our tethers that not only do the tethers hold us tightly, but we also hold the tethers tightly as well.

This protective shield extends to more threatening situations as well. In another one of my observations, I noticed that there was a woman in a subway station, and a man approached her asking for money. As I watched this interaction unfold, I could see his extended hand and hear his repeated requests for "spare change" and mentions of homelessness‚Äîcommon signs of panhandling in NYC. She started quickly walking away while looking at her phone, very intentionally trying not to look at him while moving herself towards the station's main area, likely to find more people in case the man was to cause her any harm. What I found really interesting was that the woman was on her phone the whole time. She stared at it the whole time, even though the more probable threat was the person behind her rather than her smartphone. I feel like it would've been much smarter for her to look at the person and make sure he wasn't going to endanger her. I suppose there is the chance that staring at the man would have further antagonized him, but in a case where someone is already following you in an almost empty station, I think that's a risk worth taking to protect yourself. Staring at your phone, even superficially by not paying attention to the content on it, still heavily limits her ability to react in case things escalate. Once again, another example of being not fully here, but not really being fully elsewhere either.

Interestingly, this behavior reveals a psychological protective mechanism. One reason why I think she might be doing this is because her mind wanted to actively distract herself to avoid the trauma that she is actually being stalked. The human mind seems to have an ability to forcibly block things that it does not want to think about by moving you to somewhere else mentally, spending your mind's resources associating yourself with another environment. Having fewer resources in your mind telling you how bad the current situation is limits the total pain it could cause you, according to a study done by Dr. Denise M. Sloan, an associate director at the National Center for PTSD (Swaim 5). Here is another example of the smartphone functioning as a social shield ‚Äì providing a visual barrier, a reason not to engage, and an escape portal from an uncomfortable reality. Her behavior demonstrates what Turkle calls the "tethered self" ‚Äì being physically present but mentally elsewhere. The woman's smartphone allowed her to psychologically escape a dangerous situation by tethering mind to a safer digital space, placing herself within the liminal space of reality and the digital world. The dual existence of these two worlds plays an interesting role in this situation: while her body remained vulnerable in the subway station, her attention ran away from the threat. This demonstrates how smartphones can function as psychological protection devices, not just from potential physical threats but from the emotional discomfort of confrontation. This protective function was never explicitly designed into smartphones, yet it has become one of their most common uses in public spaces.

But here lies the central paradox of smartphone use in urban spaces. If phones can soothe discomfort, they just as readily stoke it. In the moment, a vibrating phone offers a reassuring ritual: glancing down lets us escape awkward eye contact, confirm a train's ETA, or signal to friends that we're still alive in the tunnel dead zone. Yet the very streams that calm us also keep our anxiety circuits primed. Citizen, Twitter, and 24-hour push notifications bombard New Yorkers with every robbery, shove, and scuffle, however rare. Each red banner lights up the brain's threat-detection pathways, triggering the same cortisol spike we'd feel if the incident were unfolding a few feet away. Doom-scrolling further reinforces the loop: every swipe delivers fresh jolts of negative stimulus and a hit of dopamine for "staying informed," so users oscillate between dread and reward. The result is what researchers call hyper-vigilant fatigue: the body's fight-or-flight switch remains half-pressed, so even the ordinary clang of closing doors feels ominous (Gotter). In a city that never sleeps, the phone that never rests ensures anxiety never fully powers down.

The gap between how smartphones were designed and how they're actually used raises important questions for technology designers. When Jobs unveiled the iPhone, he emphasized productivity, entertainment, and communication, not social avoidance or psychological self-protection, a common norm in the confines of New York City. This disconnect is a great example of what Langdon Winner, the Chair of Humanities and Social Studies at Rensselaer Polytechnic Institute, described as "technological somnambulism" ‚Äì a societal tendency to sleepwalk through technological changes that fundamentally reshape our societal activities. As Winner argues, "technologies are not merely aids to human activity, but also powerful forces acting to reshape that activity and its meaning" (Winner 4). We adopt smartphones without fully examining their side effects, and we only stumble into how deeply they have altered our social behaviors and norms. Yet my observations suggest these unintended functions fulfill genuine human needs in an increasingly crowded, stimulating world. How might technology be designed differently if engineers acknowledged these actual usage patterns? What ethical responsibility do designers have when creating tools that so profoundly shape social behavior?

My observations reveal that smartphones have evolved beyond their designers' intentions into sophisticated social tools that help manage modern anxieties. The gap between designed purpose and actual use reflects our paradoxical desires: we crave both connection and isolation, productivity and distraction, social engagement and personal retreat. This causes us to be increasingly uncomfortable with our social moments and the humanity and vulnerability such interactions require. This tension places significant ethical responsibility on technology designers, who must recognize that their creations don't simply serve stated functions but actively reshape social norms and human behavior. Understanding this relationship requires moving beyond simple narratives of addiction or convenience to recognize how we actively repurpose technology to manage complex social realities. As we design future technologies, acknowledging how these tensions are developed might help create tools that better align with genuine human needs rather than inadvertently amplifying our social anxieties.`
            },
            { 
    version: "Draft 2", 
    text: `Ping! Panic! Repeat!

Picture a late-night subway ride on the F subway line: fluorescent lights flicker overhead, a half-empty car rattles through the tunnel, and every few seconds somebody's phone buzzes. "Armed robbery‚ÄîUpper East Side," flashes one push notification. "Man shoved onto tracks in Midtown," warns another. A teenager beside you scrolls an endless reel of grainy security-camera clips, often with some unsuspecting victim about to be assaulted; a middle-aged commuter checks the Citizen app, its red map pins pulsing like fresh wounds across the city grid. Even the PA system crackles with an "If you see something, say something" reminder. Surrounded by screens and alerts, the train car feels poised for disaster, and instinctively, you tighten your grip on the handrail, eyes darting toward every stranger who wanders too close.

Yet that sense of imminent danger is becoming mostly a digital mirage. According to the NYPD's first-quarter 2025 report, subway crime is down double digits, with zero murders‚Äîthe safest start to a year in at least seven years and among the lowest violent-crime tallies ever recorded on the system (New York Daily News). If crime is at historic lows, what explains the persistent feeling of danger that permeates subway cars? The answer may lie in the device nearly every rider carries: Smartphones. While smartphones were designed to connect us and keep us informed, their actual use in public spaces reveals a more complex aspect of how we navigate modern urban anxieties. To investigate this, I spent three weeks in February of 2025 riding numerous subway lines and bus routes, documenting episodes of public phone use.

The patterns I observed would have surprised even Steve Jobs, who envisioned this device bringing people together rather than helping them avoid each other. When Jobs unveiled the iPhone in 2007, Jobs spoke of seamless communication and instant connection (Pangambam). Today, it constructs personal media bubbles that double as social shields, offering connection while encouraging retreat.

Technology sociologist Sherry Turkle, a professor of social studies of science and technology at Massachusetts Institute of Technology, has coined the term "tethered self," which illustrates this phenomenon. This "tethered self" creates a world where we maintain a constant psychological readiness for the connections that matter to us digitally. According to Turkle, smartphones have created a state of society where we are "always-on/always-on-you," a reference to how smartphones are always readily available to us as a society (Turkle 121). But many people embrace this "tethered self," actively choosing to escape into this digital world even if not called upon by their connections in the digital world. This, as Turkle continues, creates a "liminal space between the physical real and its digital lives on multiple screens" (Turkle 122). We are never fully here, yet never fully elsewhere either.

This liminal space helps explain what I observed in my field notes: riders repeatedly chose digital retreat over physical engagement when faced with social uncertainties. The tether acts as a quick way for users to create psychological buffers, a protection against the demands of human interaction. Riding the M103 down Third Avenue, I watched two friends chat easily. They had a nice, long conversation, talking about their daily lives, with neither of them holding a smartphone at all. After a while, it seemed like one of the friends had reached his stop. He said goodbye to his friend and left the bus, leaving the other friend to ride alone. The moment the remaining rider was alone, he cast a cautious glance around, made brief eye contact with me, and fled into his phone. When I made eye contact, I also felt a similar urge, pulling out my phone to start playing video games. This simultaneous retreat made me wonder whether digital avoidance might be socially contagious. Maybe when one person withdraws into their device, it signals to others that the digital escape is both accepted and expected. In my mind, eye contact with a stranger was uncomfortable, and I felt a need to intentionally distract myself with a phone to try to relieve myself of the awkward situation. I imagine that the stranger also felt the same way, suddenly feeling a void that was once filled with conversation with his friend. Part of this does have a cultural backing to it; there are plenty of folktales on the New York City subway about how making momentary eye contact with a stranger resulted in an altercation. As such, it has become a social norm for people to actively avoid eye contact, and the smartphone has been repurposed as a tool for this use. I could be doing absolutely nothing on my phone, just staring at the weather for the hundredth time, yet it creates the sense of safety that I will not accidentally stare right into someone's eyes, possibly creating an unsettling and tense situation. This incident revealed a profound irony: devices engineered to enhance connection can also become tools that dissuade it just as easily. The smartphone's design makes it an ideal shield‚Äîits screen demands attention and signals busyness to others, creating a socially acceptable way to opt out of physical presence while maintaining the appearance of productivity. This is the crux of Turkle's point about technology: We have become so attached to our tethers that not only do the tethers hold us tightly, but we also hold the tethers tightly as well.

This protective shield extends to more threatening situations as well. In another one of my observations, I noticed that there was a woman in a subway station, and a man approached her asking for money. As I watched this interaction unfold, I could see his extended hand and hear his repeated requests for "spare change" and mentions of homelessness‚Äîcommon signs of panhandling in NYC. She started quickly walking away while looking at her phone, keeping her eyes fixed on the screen rather than looking at him while moving herself towards the station's main area, where more people were present. What I found really interesting was that the woman was on her phone the whole time. She stared at it the whole time, even though the more probable threat was the person behind her rather than her smartphone. I feel like it would've been much smarter for her to look at the person and make sure he wasn't going to endanger her. I suppose there is the chance that staring at the man would have further antagonized him, but in a case where someone is already following you in an almost empty station, I think that's a risk worth taking to protect yourself. Staring at your phone, even superficially by not paying attention to the content on it, still heavily limits her ability to react in case things escalate. Once again, another example of being not fully here, but not really being fully elsewhere either.

Interestingly, this behavior reveals a psychological protective mechanism. One reason why I think she might be doing this is because her mind wanted to actively distract herself to avoid the trauma that she is actively being followed. The human mind has the ability to forcibly block things it does not want to think about by mentally shifting you to another place, thereby allocating your mental resources to associate with a different environment. Her mind may have been using what researchers call "peritraumatic dissociation," which is a psychological response that can include emotional numbness and altered perception during stressful events, according to an observational study done by analyzing responses to standardized questionnaires by Dr. Denise M. Sloan, an associate director at the National Center for PTSD (Swaim 5). Here is another example of the smartphone functioning as a social shield ‚Äì providing a visual barrier, a reason not to engage, and an escape portal from an uncomfortable reality. Her behavior demonstrates what Turkle calls the "tethered self" ‚Äì being physically present but mentally elsewhere. The woman's smartphone allowed her to psychologically escape a dangerous situation by tethering her mind to a safer digital space, placing herself within the liminal space of reality and the digital world. The dual existence of these two worlds plays an interesting role in this situation: while her body remained vulnerable in the subway station, her attention ran away from the threat. This situation demonstrates how smartphones can function as psychological protection devices, not just from potential physical threats but from the emotional discomfort of confrontation. This protective function was never explicitly designed into smartphones, yet it has become one of their most common uses in public spaces.

But this protective function shows a troubling irony. While phones shield us from immediate discomfort, they also amplify our broader anxieties about urban danger. These devices simultaneously serve as shields from present realities and sources for the constant stream of crime alerts, push notifications, and security footage that make public spaces feel perpetually unsafe (Riddell, 34). This creates the central paradox of smartphone use in urban spaces. If phones can soothe discomfort, they just as readily stoke it. In the moment, a vibrating phone offers a reassuring ritual: glancing down lets us escape awkward eye contact, confirm a train's ETA, or signal to friends that we're still alive in the tunnel dead zone. Yet the very streams that calm us also keep our anxiety circuits primed. Citizen, Twitter, and 24-hour push notifications bombard New Yorkers with every robbery, shove, and scuffle, however rare. Each red banner lights up the brain's triggers the same stress response we'd feel if the incident were unfolding a few feet away (Intravia). Doom-scrolling further reinforces the loop: every swipe delivers fresh jolts of negative stimulus and a hit of dopamine for "staying informed," so users oscillate between dread and reward (Dolgoff). The result is what experts like Dr. Timothy J. Legg, adjunct professor in the Pepperdine Graduate School of Education and Psychology, call hyper-vigilant fatigue: the body's fight-or-flight switch remains half-pressed, so even the ordinary clang of closing doors feels ominous (Gotter). In a city that never sleeps, the phone that never rests ensures anxiety never fully powers down.

The gap between how smartphones were designed and how they're actually used raises important questions for technology designers. When Jobs unveiled the iPhone, he emphasized productivity, entertainment, and communication, not social avoidance or psychological self-protection, a common norm in the confines of New York City. This disconnect is a great example of what Langdon Winner, the Chair of Humanities and Social Studies at Rensselaer Polytechnic Institute, described as "technological somnambulism" ‚Äì a societal tendency to sleepwalk through technological changes that fundamentally reshape our societal activities. As Winner argues, "technologies are not merely aids to human activity, but also powerful forces acting to reshape that activity and its meaning" (Winner 4). Published in 1973, Winner cites numerous archaic examples, but clearly he was a man ahead of his time, as these thoughts apply equally well to the world we live in today and the newest technologies that actively change society. We adopted smartphones without fully examining their side effects, and we only stumbled into how deeply they have altered our social behaviors and norms. Yet my observations suggest these unintended functions fulfill genuine human needs in an increasingly crowded, stimulating world. How might technology be designed differently if engineers acknowledged these actual usage patterns? What ethical responsibility do designers have when creating tools that so profoundly shape social behavior?

My observations suggest that smartphones have evolved beyond their designers' intentions into sophisticated social tools that help manage modern anxieties. The gap between designed purpose and actual use reflects our paradoxical desires: we crave both connection and isolation, productivity and distraction, social engagement and personal retreat. This causes us to be increasingly uncomfortable with our social moments and the humanity and vulnerability such interactions require. This tension places significant ethical responsibility on technology designers, who must recognize that their creations don't simply serve stated functions but actively reshape social norms and human behavior. Understanding this relationship requires moving beyond simple narratives of addiction or convenience to recognize how we actively repurpose technology to manage complex social realities. As we design future technologies, acknowledging how these tensions are developed might help create tools that better align with genuine human needs rather than inadvertently amplifying our social anxieties.`
},
{ 
    version: "Draft 3", 
    text: `Ping! Panic! Repeat!

Picture a late-night subway ride on the F subway line: fluorescent lights flicker overhead, a half-empty car rattles through the tunnel, and every few seconds somebody's phone buzzes. "Armed robbery‚ÄîUpper East Side," flashes one push notification. "Man shoved onto tracks in Midtown," warns another. A teenager beside you scrolls an endless reel of grainy security-camera clips, often with some unsuspecting victim about to be assaulted. A middle-aged commuter checks the Citizen app, its red map pins pulsing like fresh wounds across the city grid. Even the PA system crackles with an "if you see something, say something" reminder. Surrounded by screens and alerts, the train car feels poised for disaster, and instinctively, you tighten your grip on the handrail, eyes darting toward every stranger who wanders too close.

Yet that sense of danger may be a digital mirage. According to the NYPD's first-quarter 2025 report, subway crime is down double digits, with zero murders‚Äîthe safest start to a year in at least seven years and among the lowest violent-crime tallies ever recorded on the system (New York Daily News). Maybe can make an ordinary ride feel dangerous is not an epidemic of violence in the smartphones in our pocket. To investigate this possibility, I spent three weeks in February of 2025 riding numerous subway lines and bus routes, documenting episodes of public phone use. More broadly, I began to see that while smartphones were designed to connect us and keep us informed, their actual use in public spaces also reveals their complex role in how we navigate modern urban anxieties.

The patterns I observed might have surprised even Steve Jobs, the founder of Apple, who envisioned his smartphone bringing people together rather than helping them avoid each other. When Jobs unveiled his ideas for the iPhone in 2007, Jobs spoke of seamless communication and instant connection (Pangambam). But that's not the way I saw smartphones being used on transit. There, I began to think of them as constructing what I call "social shields," digital barriers that allow users to avoid physical interactions in a socially acceptable way, the antithesis to Job's vision. By staring at a screen, users can avoid eye contact, deflect unwanted conversations, and, perhaps, create psychological distance from their immediate environment while maintaining the appearance of productivity.

My idea of a "social shield" emerged from what technology sociologist Sherry Turkle coined the "tethered self" in her essay "Always-On/Always-On-You: The Tethered Self." Writing in 2008, just one year after the release of the iPhone, Turkle predicted with remarkable precision about how these devices could reshape social life. She described how smartphones were creating a state of society where we are "always-on/always-on-you," a reference to how smartphones are always readily available to us as a society (Turkle 121). Turkle, a professor of social studies of science and technology at Massachusetts Institute of Technology, describes how our "tethered self" can maintain a constant psychological readiness for the connections that matter to us digitally (121). The smartphone creates a "liminal space between the physical real and its digital lives on multiple screens" (122). We are never fully here, yet never fully elsewhere either.

Based on my observations, many people embrace this "tethered self," actively choosing to turn to their digital worlds during moments of social discomfort, regardless of whether they have actual messages or notifications to address. Riding the M103 down Third Avenue, I watched two friends chat easily. They had a nice, long conversation, talking about their daily lives, with neither of them holding a smartphone at all. After a while, it seemed like one of the friends had reached his stop. He said goodbye to his friend and left the bus, leaving the other friend to ride alone. The moment the remaining rider was alone, he cast a cautious glance around, made brief eye contact with me, and fled into his phone. When I made eye contact, I also felt a similar urge, pulling out my phone to start playing video games. Maybe when one person withdraws into their device, it signals to others that the digital escape is both accepted and expected. In my mind, eye contact with a stranger was uncomfortable, and I felt a need to intentionally distract myself with a phone to try to relieve myself of the awkward situation. Maybe the stranger felt the same way.

The tether can act as more than a quick way for users to create psychological buffers. On the subway, the smartphones are also repurposed as a means to actively avoid eye contact. I could be doing absolutely nothing on my phone, just staring at the weather for the hundredth time, yet it creates the sense of safety that I will not accidentally stare right into someone's eyes, possibly creating an unsettling and tense situation. There's a cultural backing behind my behavior; there are plenty of folktales on the New York City subway about how making momentary eye contact with a stranger resulted in an altercation. Ironically, devices engineered to enhance connection can also become tools that dissuade it just as easily. The smartphone's design makes it an ideal shield‚Äîits screen demands attention and signals busyness to others, creating a socially acceptable way to opt out of physical presence while maintaining the appearance of productivity.

This is the crux of Turkle's point about technology: We have become so attached to these devices that not only control our attention and behavior, but we also actively choose to depend on them for psychological comfort and social protection (Turkle 122). In other words, we have become so attached to our tethers that not only do the tethers hold us tightly, but we also hold the tethers tightly as well.

Using smartphones as protective shields can extend to more threatening situations. In another one of my observations, I noticed that there was a woman in a subway station, and a man approached her asking for money. As I watched the interaction unfold, I could see his extended hand and hear his repeated requests for "spare change" and mentions of his homelessness. She started quickly walking away while looking at her phone, keeping her eyes fixed on the screen rather than looking at him, while moving herself towards the station's main area, where more people were present. What I found really interesting was that the woman was on her phone the whole time, staring at it even though, I thought, the more probable pressing matter was the person behind her. I suppose there was the chance that staring at the man could have antagonized him, but staring at your phone, even superficially by not paying attention to the content on it, still heavily limits a person's ability to react should things escalate.

It's impossible to know if the woman was staring at her phone to avoid the trauma that might come with being followed. But if she were, there is some grounding in research. She may have been experiencing what researchers like Dr. Denise M. Sloan, associate director at the National Center for PTSD, calls "peritraumatic dissociation", a phenomenon characterized by emotional numbness and altered perception during stressful events (Swaim 5). A defense mechanism, peritraumatic dissociation allows the mind to protect itself by creating a mental escape when physical escape isn't possible, as fewer mental resources are dedicated to processing how scary or painful a situation feels (Swaim 5). In this case, the smartphone functions as a social shield, providing a visual barrier and a reason not to engage. One can go as far as to say it's an escape portal from an uncomfortable reality. In such a case, a person's behavior could demonstrate Turkle's concept of the "tethered self" in an extreme context, where being mentally elsewhere became part of a survival strategy rather than merely social avoidance. The dual existence of these two worlds, as Turkle frames them, could plays an interesting role here: while a person's body remains vulnerable in a subway station, their attention is elsewhere, away from the threat. Research by Dr. John Hunter, assistant professor of psychology at Chapman University, finds that smartphones can act as a "digital security blanket" that buffers against psychological stress (Hunter et al. 346). Their mere presence can decrease stress levels in people, as the study showed that people without access to smartphones had significantly increased levels of stress (Hunter et al. 349). It's a protective function that was never explicitly designed into smartphones, yet it seems to have become a common use in public spaces.

While phones shield us from immediate discomfort, they may ironically also amplify our broader anxieties about urban danger. These devices are sources for the constant stream of crime alerts, push notifications, and security footage that make public spaces feel perpetually unsafe (Riddell 34). If phones can soothe discomfort, they just as readily stoke it. In the moment, a vibrating phone offers a reassuring ritual: glancing down lets us escape awkward eye contact, confirm a train's ETA, or signal to friends that we're still alive in the tunnel dead zone. Yet the very streams that calm us also keep our anxiety circuits primed. 24-hour push notifications bombard New Yorkers with every robbery, shove, and scuffle, however rare. Each red banner lights up the brain's triggers the same stress response we'd feel if the incident were unfolding a few feet away (Intravia). Doom-scrolling, a recent trend defined by people spending excessive time scrolling through content made to make them feel sad, anxious, or angry, further reinforces this loop (Doomscroll): every swipe delivers fresh jolts of negative stimulus and a hit of dopamine for "staying informed," so users oscillate between dread and reward (Dolgoff). The result is what experts like Dr. Timothy J. Legg, adjunct professor in the Pepperdine Graduate School of Education and Psychology, called hyper-vigilant fatigue: the body's fight-or-flight switch remains half-pressed, so even the ordinary clang of closing doors feels ominous (Gotter). In urban environments like New York City, these algorithmic notifications inadvertently create chronically stressed commuters who constantly perceive danger where little exists. While it is important for commuters to be aware of real, tangible threats nearby, current smartphone designs lack a balance between providing adequate safety information and psychological well-being. In a city that never sleeps, the phone that never rests ensures anxiety never fully powers down.

The disconnect between how smartphones were designed and how they're actually used raises important questions for technology designers. When Jobs unveiled the iPhone, he emphasized productivity, entertainment, and communication, not social avoidance or psychological self-protection. Yet my observations suggest these unintended functions fulfill genuine human needs in an increasingly crowded, stimulating world. The difference between Job's intentions for the iPhone and what we currently use them for is a great example of what Langdon Winner, a professor at Rensselaer Polytechnic Institute, described as "technological somnambulism" ‚Äì a societal tendency for us to sleepwalk through technological changes that fundamentally reshape our societal activities. Winner was writing in 1973, but clearly he was a man ahead of his time, as these thoughts apply to how the smartphone, one of the most fundamental technologies of the 21st century, has changed society. We adopted smartphones without fully examining their side effects, and only later did we truly realize the true side effects they have in our world (Winner 53). How might technology be designed differently if engineers acknowledged these actual usage patterns? What ethical responsibility do designers have when creating tools that so profoundly shape social behavior?

Technology designers must recognize that their creations don't simply serve stated functions but actively reshape social norms and human behavior, now bearing a significant ethical responsibility. As we design future technologies, acknowledging how these tensions are developed might help create tools that better align with genuine human needs rather than inadvertently amplifying our social anxieties.`
},
{ 
    version: "Draft 4", 
    text: `Ping! Panic! Repeat!

Picture a late-night subway ride on the F subway line: fluorescent lights flicker overhead, a half-empty car rattles through the tunnel, and every few seconds somebody's phone buzzes. "Armed robbery‚ÄîUpper East Side," flashes one push notification. "Man shoved onto tracks in Midtown," warns another. A teenager beside you scrolls an endless reel of grainy security-camera clips, often with some unsuspecting victim about to be assaulted. A middle-aged commuter checks the Citizen app, its red map pins pulsing like fresh wounds across the city grid. Even the PA system crackles with an "if you see something, say something" reminder. Surrounded by screens and alerts, the train car feels poised for disaster, and instinctively, you tighten your grip on the handrail, eyes darting toward every stranger who wanders too close.

Yet that sense of danger may be a digital mirage. According to the NYPD's first-quarter 2025 report, subway crime is down double digits, with zero murders‚Äîthe safest start to a year in at least seven years and among the lowest violent-crime tallies ever recorded on the system (NYPD). Maybe what can make an ordinary ride feel dangerous is not an epidemic of violence but the smartphones in our pocket. I spent three weeks in February of 2025 riding numerous subway lines and bus routes, documenting episodes of public phone use. More broadly, I began to see that while smartphones were designed to connect us and keep us informed, they have evolved into sophisticated social tools that help manage our anxieties while navigating urban spaces.

The patterns I observed Steve Jobs, the founder of Apple, who envisioned his smartphone bringing people together. When Jobs unveiled his ideas for the first iPhone in 2007, Jobs spoke of seamless communication and instant connection (Pangambam). But that's not the way I saw smartphones being used on transit. There, I began to think of them as constructing what I call "social shields," digital barriers that allow users to avoid physical interactions in a socially acceptable way, the antithesis to Job's vision. By staring at a screen, users can avoid eye contact, deflect unwanted conversations, and, perhaps, create psychological distance from their immediate environment while maintaining the appearance of productivity.

My idea of a "social shield" emerged from what technology sociologist Sherry Turkle coined the "tethered self" in her essay "Always-On/Always-On-You: The Tethered Self." Writing in 2008, just one year after the release of the iPhone, Turkle predicted with remarkable precision about how these devices could reshape social life. She described how smartphones were creating a state of society where we are "always-on/always-on-you," a reference to how smartphones are always readily available (Turkle 121). Turkle, a professor of social studies of science and technology at Massachusetts Institute of Technology, describes how our "tethered self" can maintain a constant psychological readiness for the connections that matter to us digitally (121). The smartphone creates a "liminal space between the physical real and its digital lives on multiple screens," Turkle writes (122). We are never fully here, yet never fully elsewhere either.

Based on my observations, many people embrace this "tethered self," actively choosing to turn to their digital worlds during moments of social discomfort, regardless of whether they have actual messages or notifications to address. Riding the M103 down Third Avenue, I watched two friends chat easily. They had a nice, long conversation, talking about their daily lives, with neither of them holding a smartphone at all. After a while, it seemed like one of the friends had reached his stop. He said goodbye to his friend and left the bus, leaving the other friend to ride alone. The moment the remaining rider was alone, he cast a cautious glance around, made brief eye contact with me, and fled into his phone. When I made eye contact, I also felt a similar urge, pulling out my phone to start playing video games. Maybe when one person withdraws into their device, it signals to others that the digital escape is both accepted and expected. In my mind, eye contact with a stranger was uncomfortable, and I felt a need to intentionally distract myself with a phone to try to relieve myself of the awkward situation. Maybe the stranger felt the same way.

The tether can act as more than a quick way for users to create psychological buffers. On the subway, the smartphones are also repurposed as a means to actively avoid eye contact. I could be doing absolutely nothing on my phone, just staring at the weather for the hundredth time, yet it creates the sense of safety that I will not accidentally stare right into someone's eyes, possibly creating an unsettling and tense situation. There's a cultural backing behind my behavior; there are plenty of folktales on the New York City subway about how making momentary eye contact with a stranger resulted in an altercation. Ironically, devices engineered to enhance connection can also become tools that dissuade it just as easily. The smartphone's design makes it an ideal shield‚Äîits screen demands attention and signals busyness to others, creating a socially acceptable way to opt out of physical presence while maintaining the appearance of productivity.

This is the crux of Turkle's point about technology: We have become so attached to these devices that not only control our attention and behavior, but we also actively choose to depend on them for psychological comfort and social protection (Turkle 122). In other words, we have become so attached to our tethers that not only do the tethers hold us tightly, but we also hold the tethers tightly as well.

Using smartphones as protective shields can extend to more threatening situations. In another one of my observations, I noticed that there was a woman in a subway station, and a man approached her asking for money. As I watched the interaction unfold, I could see his extended hand and hear his repeated requests for "spare change" and mentions of his homelessness. She started quickly walking away while looking at her phone, keeping her eyes fixed on the screen rather than looking at him, while moving herself towards the station's main area, where more people were present. What I found really interesting was that the woman was on her phone the whole time, staring at it even though, I thought, the more probable pressing matter was the person behind her. I suppose there was the chance that staring at the man could have antagonized him, but staring at your phone, even superficially by not paying attention to the content on it, still heavily limits a person's ability to react should things escalate.

The dual existence of these two worlds, as Turkle frames them, could play an interesting role here: while a person's body remains vulnerable in a subway station, their attention is elsewhere, away from the threat. Research by Dr. John Hunter, assistant professor of psychology at Chapman University, finds that smartphones can act as a "digital security blanket" that buffers against psychological stress (Hunter et al. 346). Their mere presence can decrease stress levels in people, as the study showed that people without access to smartphones had significantly increased levels of stress (Hunter et al. 349). It's a protective function that was never explicitly designed into smartphones, yet it seems to have become a common use in public spaces.

While phones shield us from immediate discomfort, they may ironically also amplify our broader anxieties about urban danger. These devices are sources for the constant stream of crime alerts, push notifications, and security footage that make public spaces feel perpetually unsafe (Riddell 34). If phones can soothe discomfort, they just as readily stoke it. In the moment, a vibrating phone offers a reassuring ritual: glancing down lets us escape awkward eye contact, confirm a train's ETA, or signal to friends that we're still alive in the tunnel dead zone. Yet the very streams that calm us also keep our anxiety circuits primed. 24-hour push notifications bombard New Yorkers with every robbery, shove, and scuffle, however rare. Doom-scrolling, a recent trend defined by people spending excessive time scrolling through content made to make them feel sad, anxious, or angry, further reinforces this loop (Doomscroll): every swipe delivers fresh jolts of negative stimulus and a hit of dopamine for "staying informed," so users oscillate between dread and reward (Dolgoff). The result is what experts like Dr. Timothy J. Legg, adjunct professor in the Pepperdine Graduate School of Education and Psychology, called hyper-vigilant fatigue: the body's fight-or-flight switch remains half-pressed, so even the ordinary clang of closing doors feels ominous (Gotter). In urban environments like New York City, these algorithmic notifications inadvertently create chronically stressed commuters who constantly perceive danger where little exists. While it is important for commuters to be aware of real, tangible threats nearby, current smartphone designs lack a balance between providing adequate safety information and psychological well-being. In a city that never sleeps, the phone that never rests ensures anxiety never fully powers down.

The disconnect between how smartphones were designed and how they're actually used raises important questions for technology designers. When Jobs unveiled the iPhone, he emphasized productivity, entertainment, and communication, not social avoidance or psychological self-protection. Yet my observations suggest these unintended functions fulfill genuine human needs in an increasingly crowded, stimulating world. The difference between Job's intentions for the iPhone and what we currently use them for is a great example of what Langdon Winner, a professor at Rensselaer Polytechnic Institute, described as "technological somnambulism" ‚Äì a societal tendency for us to sleepwalk through technological changes that fundamentally reshape our societal activities. Winner was writing in 1973, but clearly he was a man ahead of his time, as these thoughts apply to how the smartphone, one of the most fundamental technologies of the 21st century, has changed society. We adopted smartphones without fully examining their side effects, and only later did we truly realize the true side effects they have in our world (Winner 53). My observations suggest these unintended functions fulfill genuine human needs in an increasingly crowded, stimulating world. The gap between smartphones' designed purpose and actual use reflects our conflicting desires: we crave both connection and isolation, productivity and distraction, social engagement and personal retreat. How might technology be designed differently if engineers acknowledged these actual usage patterns? What ethical responsibility do designers have when creating tools that so profoundly shape social behavior?

Technology designers must recognize that their creations don't simply serve stated functions but actively reshape social norms and human behavior, now bearing a significant ethical responsibility. As we design future technologies, acknowledging how these tensions are developed might help create tools that better align with genuine human needs rather than inadvertently amplifying our social anxieties.`
},

{ 
    version: "Final Draft", 
    text: `Ping! Panic! Repeat!

Back in February, there was a stabbing near High Street at Tandon, but I didn't realize anything had happened until I got the alert on my Citizen app hours later, and I felt retroactively scared. Without it, I would never have known anything dangerous had occurred near me that day. When I first downloaded the Citizen app back in November, I'd already been riding the subways for two or three months without incident. On the subway, I never noticed anything dangerous around me, but once I had the app, I could see a massive map with countless different crimes happening across the city, curating all of these incidents for me. I was certainly a lot more worried after downloading the app, even though I was never actually a victim of crime. Was it better that I didn't know before? This experience with Citizen made me wonder how much our phones might be shaping our perception of urban danger, and what all these alerts and notifications were doing to me.

That realization sparked broader research questions about cellphone use that I brought to an ethnographic study I conducted last Spring, as a computer science major at Tandon. Coming from California, I was struck by how much people used their phones on New York subways. For millions of New Yorkers, the subway isn't just transportation‚Äîit's a lifeline carrying people to work, school, and social gatherings, and almost everyone I saw traveled peering at their cellphones. This ubiquitous phone usage made me curious about what was driving this behavior: Were phones simply entertainment, or were they serving a deeper psychological function in navigating urban society? I spent three weeks in February 2025 riding three subway lines and two bus routes within the Metropolitan Transportation Authority (MTA), documenting over ten hours of public phone use. I began to see that while smartphones were designed to connect us and keep us informed, they have evolved into sophisticated social tools that help manage our anxieties while navigating urban spaces. But in some cases, they may spark those anxieties as well.

The patterns I observed reveal how we've collectively chosen to use smartphones in ways its creators apparently advertised. When Steve Jobs introduced the iPhone in a speech in 2007, he described it as a revolutionary combination of three devices: "a widescreen iPod with touch controls," "a revolutionary mobile phone," and "a breakthrough Internet communications device." He focused on its groundbreaking capabilities, creating phones that had "the Internet in your pocket" (Jobs qtd. in Pangambam). Jobs was positioning the iPhone as a productivity and connectivity tool, designed to make communication, web browsing, and media consumption more efficient and seamless. His presentation was about what the technology could do, but not about what we would use the technology to do. Riding the subway in 2025, I witnessed users actively adapting the cellphone to avoid, rather than make, connections.

Riding the M103 down Third Avenue, I watched two friends chat easily. They had a nice, long conversation, talking about their daily lives, with neither of them holding a smartphone at all. After a while, it seemed like one of the friends had reached his stop. He said goodbye to his friend and left the bus, leaving the other friend to ride alone. The moment the remaining rider was alone, he cast a cautious glance around, made brief eye contact with me, and fled into his phone. When I made eye contact, I also felt a similar urge, pulling out my phone to start playing video games. Maybe when one person withdraws into their device, it signals to others that the digital escape is both accepted and expected. In my mind, eye contact with a stranger was uncomfortable, and I felt a need to intentionally distract myself with a phone to try to relieve myself of the awkward situation. Maybe the stranger felt the same way. Our phones had become what I began to call a 'social shield.'

My idea of a 'social shield' emerged from the "tethered self," a term technology sociologist Sherry Turkle coined in her essay "Always-On/Always-On-You: The Tethered Self". Writing in 2008, just one year after the release of the iPhone, Turkle predicted with remarkable precision about how these devices could reshape social life. She described how smartphones were creating a state of society where we are "always-on/always-on-you," a reference to how smartphones are always readily available (Turkle 121). Turkle, a professor of the social studies of science and technology at Massachusetts Institute of Technology, describes how our "tethered self" can maintain a constant psychological readiness for the connections that matter to us digitally (121). The smartphone creates a "liminal space between the physical real and its digital lives on multiple screens," Turkle writes paraphrasing Dr. Victor Turner, a professor of anthology at the University of Virginia (122). We are never fully here, yet never fully elsewhere either.

Based on my observations on the M103 bus and elsewhere, many people embrace this "tethered self," actively choosing to turn to their digital worlds during moments of social discomfort, regardless of whether they have actual messages or notifications to address. The tether can act as more than a quick way for users to create psychological buffers. On the subway, the smartphones are also repurposed as a means to actively avoid eye contact. I could be doing absolutely nothing on my phone, just staring at the weather for the hundredth time, yet it created the sense of safety that I would not accidentally stare right into someone's eyes, possibly creating an unsettling and tense situation. There's a cultural backing behind my behavior. Moving to New York City, I heard plenty of folktales on the New York City subway about how making momentary eye contact with a stranger resulted in an altercation. Jeremy McCarthy, a New Yorker with a Masters in Applied Psychology, has reflected on this issue, considering how the big city environment of New York City forces us to be more risk-averse, and that making eye contact creates risk and vulnerability; to do so would require us to feel confident and safe with the strangers around us (McCarthy). However, in a city with eight million different personalities, such a premise is impossible to guarantee. As such, a 2023 New York Times article explicitly listed "no eye contact" as one of the fundamental "unwritten rules" of the subway (Ley). So, by allowing us to avoid eye contact, smartphones engineered to enhance connection can also become tools that dissuade it just as easily, creating a socially acceptable way to opt out of physical presence while maintaining the appearance of productivity.

This is the crux of Turkle's point about technology: We have become so attached to these devices that not only control our attention and behavior, but we also actively choose to depend on them for psychological comfort and social protection (Turkle 122). In other words, we have become so attached to our tethers that not only do they hold us tightly, but we also hold the tethers tightly as well.

Using smartphones as protective shields can extend to more threatening situations. In another one of my observations, I noticed that there was a woman in a subway station, and a man approached her asking for money. As I watched the interaction unfold, I could see his extended hand and hear his repeated requests for "spare change" and mentions of his homelessness. She started quickly walking away while looking at her phone, keeping her eyes fixed on the screen rather than looking at him, while moving herself towards the station's main area, where more people were present. What I found really interesting was that the woman was on her phone the whole time, staring at it the whole time. As I saw it, the smartphone was functioning as a social shield, providing a visual barrier and a reason for her not to engage. While the woman physically remained in the subway station, it seemed like her attention had wandered elsewhere. Did the woman's smartphone allow her to psychologically escape a potentially threatening situation by tethering her mind to a safer digital space? I wondered if Turkle's concept of the "tethered self" could extend to an extreme context, where a person being mentally elsewhere could become part of a survival strategy rather than merely social avoidance.

While phones shield us from immediate discomfort, they may ironically also amplify our broader anxieties about urban danger. Researcher Alice Riddell conducted an eight-month ethnographic study in Brooklyn neighborhoods to investigate how Citizen's crime-tracking app was affecting residents' sense of safety and community. Using participant observation and interviews with more than seventy people, Riddell found that while Citizen can serve as a tool for community building, it simultaneously creates fear and mistrust. She wrote, "Apps with maps are powerful, making users feel small yet significant, creating reference points of relation with the self always at the centre. Citizen creates an overwhelming map of your area that gives the impression that your neighbourhood is constantly under siege and therefore a space to be mistrustful of" (Riddell 37). While it is important for commuters to be aware of real, tangible threats nearby, I believe that current smartphone apps like Citizen lack a balance between providing adequate safety information as well as psychological well-being. In a city that never sleeps, the phone that never rests may ensure anxiety that never fully powers down.

The disconnect between how smartphones were designed and how they're actually used raises important questions for technology designers. When Jobs unveiled the iPhone, he emphasized productivity, entertainment, and communication, not social avoidance nor psychological self-protection. The difference between Job's stated intentions for the iPhone and what we currently use them for is a great example of what Langdon Winner, a professor at Rensselaer Polytechnic Institute, described as "technological somnambulism"‚Äîa societal tendency for us to sleepwalk through technological changes that fundamentally reshape our societal activities. Winner was writing in 1973, reflecting on how cars and televisions had radically changed societal functions, but clearly, he was a man ahead of his time. His thoughts clearly apply to how the smartphone, one of the most fundamental technologies of the twenty-first century, has also changed society. "Only later does the broader significance of the choice become clear, typically as a series of surprising 'side effects' or 'secondary consequences'" (Winner 53). The gap between smartphones' designed purpose and actual use reflects our conflicting desires: we crave both connection and isolation, productivity and distraction, social engagement and personal retreat. We use them for both, and in doing so, they shape our behaviors.

Yet it would be far too simplistic and deterministic to say that people just passively let technology change them. As Winner puts it, this idea "does little justice to the genuine choices that arise, in both principle and practice, in the course of technical and social transformation" (Winner 53). The key insight Winner identifies is that we, as a society, must recognize our active role in shaping our society through technology. "Throughout their lives people come together to renew the fabric of relationships, transactions, and meanings that sustain their common existence" (Winner 59). Technology is a tool we use to create this social fabric, but we remain the weavers. This perspective leads Winner to pose the crucial question: "What kind of world are we making?" (Winner 59).

For those of us who find ourselves tethered to our devices on daily commutes, the answer is that we need to realize we have more agency than we think we do. The simple advice to "look up" feels inadequate given how deeply these patterns run. It's hard for me to remember the last time I left my dorm without my phone. But recognizing that we may be using technology to manage urban anxiety, rather than being controlled by our phones, opens possibilities for more intentional engagement. Understanding our phones as 'social shields' rather than inevitable dependencies can help us make more conscious choices about when and how we engage with our devices. This doesn't mean forcing ourselves into uncomfortable eye contact with strangers or abandoning the psychological comfort our phones provide. Instead, it means becoming more aware of the trade-offs we're making. My experience with the Citizen app taught me that sometimes ignorance can be a form of peace, but for others, a conscious choice to consume information about their surroundings may also be a form of peace. The goal is not to decrease or eliminate smartphone usage, but to use them more deliberately.

For technology designers, these questions carry greater weight. Designers must recognize that our creations don't simply serve stated functions, but also actively reshape social norms and human behavior, bearing significant ethical responsibility. Designers must not simply seek to avoid harm but to actively consider the social and psychological conditions being created, asking questions before widespread adoption rather than discovering problematic effects afterward. Winner is clear about this obligation, writing: "Much more than we have acknowledged in the past, we must admit our responsibility for what we are making" (Winner 59). Importantly, Winner is speaking to society as a whole, as our own interactions with technology also fuel these changes. At the end of the day, we all bear some responsibility for examining how new technologies impact our collective lives. As we move forward with technological innovation, acknowledging these tensions might help create tools that better align with genuine human needs rather than inadvertently amplifying our social anxieties.`
}
                ]
            }
        };
        
        function createPanels(essay) {
            const slider = document.getElementById('comparisonSlider');
            slider.innerHTML = ''; // Clear existing panels
            
            const panels = [];
            
            // Create panels: Draft 1, Diff 1‚Üí2, Draft 2, Diff 2‚Üí3, Draft 3, etc.
            for (let i = 0; i < essay.drafts.length; i++) {
                // Add draft panel
                const draftPanel = document.createElement('div');
                draftPanel.className = 'panel';
                const formattedText = formatText(essay.drafts[i].text);
                draftPanel.innerHTML = `
                    <h3>${essay.drafts[i].version}</h3>
                    <div class="panel-content">${formattedText}</div>
                `;
                slider.appendChild(draftPanel);
                panels.push({ type: 'draft', index: i });
                
                if (i < essay.drafts.length - 1) {
                    const diffPanel = document.createElement('div');
                    diffPanel.className = 'panel diff-panel';
                    const formattedText1 = formatText(essay.drafts[i].text);
                    const formattedText2 = formatText(essay.drafts[i + 1].text);
                    const diffContent = generateAdvancedDiff(formattedText1, formattedText2);
                    diffPanel.innerHTML = `
                        <h3>Changes: ${essay.drafts[i].version} ‚Üí ${essay.drafts[i + 1].version}</h3>
                        <div class="diff-legend">
                            <span class="legend-item"><span class="deletion word-level">Deleted</span></span>
                            <span class="legend-item"><span class="addition word-level">Added</span></span>
                            <span class="legend-item"><span class="addition relocated">Relocated</span></span>
                        </div>
                        <div class="panel-content">${diffContent}</div>
                    `;
                    slider.appendChild(diffPanel);
                    panels.push({ type: 'diff', fromIndex: i, toIndex: i + 1 });
                }
            }
            
            return panels;
        }
        
        function loadExampleEssay(essayId) {
            const essay = exampleEssays[essayId];
            if (!essay || !essay.drafts) {
                showError('Example essay not found.');
                return;
            }
            
            currentEssay = essay;
            
            // Clear any previous errors
            const errorMessage = document.getElementById('errorMessage');
            if (errorMessage) errorMessage.style.display = 'none';
            
            // Hide upload section
            const uploadSection = document.querySelector('.upload-section');
            if (uploadSection) uploadSection.classList.add('hidden');
            
            // Create all panels
            const panelInfo = createPanels(essay);
            totalPanels = panelInfo.length;
            currentPosition = 0;
            
            // Display results
            const comparisonResults = document.getElementById('comparisonResults');
            if (comparisonResults) {
                comparisonResults.style.display = 'block';
                updateSliderPosition();
                updateNavigationInfo(panelInfo);
            }
            
            // Add event listener for new comparison button
            setupNewComparisonButton();
        }
        
        function updateNavigationInfo(panelInfo) {
            const navInfo = document.getElementById('navigationInfo');
            if (navInfo && panelInfo[currentPosition]) {
                const panel = panelInfo[currentPosition];
                if (panel.type === 'draft') {
                    navInfo.textContent = currentEssay.drafts[panel.index].version;
                } else if (panel.type === 'diff') {
                    navInfo.textContent = `Changes: ${currentEssay.drafts[panel.fromIndex].version} ‚Üí ${currentEssay.drafts[panel.toIndex].version}`;
                }
            }
        }

        function setupNewComparisonButton() {
    const headerNewComparisonBtn = document.getElementById('headerNewComparisonBtn');
    if (headerNewComparisonBtn) {
        // Show the button in header
        headerNewComparisonBtn.classList.remove('hidden');
        
        // Remove any existing event listeners to avoid duplicates
        headerNewComparisonBtn.replaceWith(headerNewComparisonBtn.cloneNode(true));
        
        // Get the fresh button reference and add event listener
        const freshBtn = document.getElementById('headerNewComparisonBtn');
        freshBtn.addEventListener('click', function() {
            // Hide the button
            freshBtn.classList.add('hidden');
            
            // Show upload section
            const uploadSection = document.querySelector('.upload-section');
            if (uploadSection) uploadSection.classList.remove('hidden');
            
            // Hide comparison results
            const comparisonResults = document.getElementById('comparisonResults');
            if (comparisonResults) comparisonResults.style.display = 'none';
            
            // Clear uploaded files if any
            const file1Input = document.getElementById('file1');
            const file2Input = document.getElementById('file2');
            if (file1Input) file1Input.value = '';
            if (file2Input) file2Input.value = '';
            
            // Clear any uploaded files array
            if (typeof uploadedFiles !== 'undefined') {
                uploadedFiles = [];
            }
            
            // Reset any file lists
            const fileList = document.getElementById('fileList');
            const compareBtn = document.getElementById('compareFiles');
            if (fileList) fileList.style.display = 'none';
            if (compareBtn) compareBtn.style.display = 'none';
            
            // Clear error messages
            const errorMessage = document.getElementById('errorMessage');
            if (errorMessage) errorMessage.style.display = 'none';
            
            // Reset current essay
            currentEssay = null;
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    }
}
        
        function updateSliderPosition() {
            const translateX = -100 * currentPosition;
            document.getElementById('comparisonSlider').style.transform = `translateX(${translateX}%)`;
            
            // Update arrow states
            const leftArrow = document.getElementById('leftArrow');
            const rightArrow = document.getElementById('rightArrow');
            
            leftArrow.style.opacity = currentPosition === 0 ? '0.3' : '1';
            rightArrow.style.opacity = currentPosition >= totalPanels - 1 ? '0.3' : '1';
            
            // Update navigation info
            if (currentEssay) {
                const slider = document.getElementById('comparisonSlider');
                const panels = Array.from(slider.children);
                const panelInfo = [];
                
                // Reconstruct panel info
                let draftIndex = 0;
                for (let i = 0; i < panels.length; i++) {
                    if (i % 2 === 0) { // Draft panel
                        panelInfo.push({ type: 'draft', index: draftIndex });
                        draftIndex++;
                    } else { // Diff panel
                        panelInfo.push({ type: 'diff', fromIndex: draftIndex - 1, toIndex: draftIndex });
                    }
                }
                
                updateNavigationInfo(panelInfo);
            }
        }
        
        function switchTab(activeTabId, activeContentId) {
            document.querySelectorAll('.tab-btn').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            document.getElementById(activeTabId).classList.add('active');
            document.getElementById(activeContentId).classList.add('active');
        }
        
        // Wait for DOM to be loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Tab switching
            document.getElementById('uploadTab').addEventListener('click', function() {
                switchTab('uploadTab', 'uploadContent');
            });
            
            document.getElementById('examplesTab').addEventListener('click', function() {
                switchTab('examplesTab', 'examplesContent');
            });

            // About modal functionality
            const aboutButton = document.getElementById('aboutButton');
            const aboutModal = document.getElementById('aboutModal');
            const aboutModalClose = document.getElementById('aboutModalClose');

            aboutButton.addEventListener('click', function() {
                aboutModal.style.display = 'block';
            });

            aboutModalClose.addEventListener('click', function() {
                aboutModal.style.display = 'none';
            });

            // Close modal when clicking outside the content
            window.addEventListener('click', function(event) {
                if (event.target === aboutModal) {
                    aboutModal.style.display = 'none';
                }
            });

            // File upload event listeners
            const fileInput = document.getElementById('fileInput');
            const fileInputContainer = document.querySelector('.file-input-container');
            const compareFilesBtn = document.getElementById('compareFiles');

            fileInput.addEventListener('change', function(e) {
                handleFileUpload(e.target.files);
            });

            // Drag and drop functionality
            fileInputContainer.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.style.borderColor = 'var(--primary-color)';
                this.style.backgroundColor = 'rgba(87, 6, 140, 0.05)';
            });

            fileInputContainer.addEventListener('dragleave', function(e) {
                e.preventDefault();
                this.style.borderColor = 'var(--accent-light)';
                this.style.backgroundColor = 'transparent';
            });

            fileInputContainer.addEventListener('drop', function(e) {
                e.preventDefault();
                this.style.borderColor = 'var(--accent-light)';
                this.style.backgroundColor = 'transparent';
                handleFileUpload(e.dataTransfer.files);
            });

            compareFilesBtn.addEventListener('click', compareUploadedFiles);
                        
            // Example essay functionality
            const exampleCards = document.querySelectorAll('.example-card');
            exampleCards.forEach(card => {
                const analyzeBtn = card.querySelector('.example-btn');
                
                analyzeBtn.addEventListener('click', function() {
                    const essayId = card.getAttribute('data-essay');
                    loadExampleEssay(essayId);
                });
            });
            
            // Navigation arrows
            document.getElementById('leftArrow').addEventListener('click', function() {
                if (currentPosition > 0) {
                    currentPosition--;
                    updateSliderPosition();
                }
            });
            
            document.getElementById('rightArrow').addEventListener('click', function() {
                if (currentPosition < totalPanels - 1) {
                    currentPosition++;
                    updateSliderPosition();
                }
            });
            
            // Keyboard navigation
            document.addEventListener('keydown', function(e) {
                if (document.getElementById('comparisonResults').style.display !== 'none') {
                    if (e.key === 'ArrowLeft' && currentPosition > 0) {
                        currentPosition--;
                        updateSliderPosition();
                    } else if (e.key === 'ArrowRight' && currentPosition < totalPanels - 1) {
                        currentPosition++;
                        updateSliderPosition();
                    }
                }
            });
        });
    </script>
</body>
</html>
